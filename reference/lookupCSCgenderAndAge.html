<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function using gender and age in input file, with a lookup, to get appropriate CSC values — lookupCSCgenderAndAge • CECPfuns</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function using gender and age in input file, with a lookup, to get appropriate CSC values — lookupCSCgenderAndAge"><meta name="description" content="Function using gender and age in input file, with a lookup, to get appropriate CSC values"><meta property="og:description" content="Function using gender and age in input file, with a lookup, to get appropriate CSC values"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CECPfuns</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9059</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Background.html">Background</a></li>
    <li><a class="dropdown-item" href="../articles/Bootstrapping.html">Bootstrapping</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/RCSC_framework.html">RCSC_framework</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Function using gender and age in input file, with a lookup, to get appropriate CSC values</h1>

      <div class="d-none name"><code>lookupCSCgenderAndAge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function using gender and age in input file, with a lookup, to get appropriate CSC values</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lookupCSCgenderAndAge</span><span class="op">(</span></span>
<span>  useInternalLookup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lookupTableName <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">lookupGenderVarChar</span>,</span>
<span>  <span class="va">lookupAgeVarChar</span>,</span>
<span>  lookupCSCvarChar <span class="op">=</span> <span class="st">"CSC"</span>,</span>
<span>  <span class="va">lookupGenderF</span>,</span>
<span>  <span class="va">lookupGenderM</span>,</span>
<span>  <span class="va">lookupGenderO</span>,</span>
<span>  checkInternalLookup <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkExternalLookup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">dataTableName</span>,</span>
<span>  <span class="va">dataGenderVarChar</span>,</span>
<span>  <span class="va">dataAgeVarChar</span>,</span>
<span>  <span class="va">dataGenderF</span>,</span>
<span>  <span class="va">dataGenderM</span>,</span>
<span>  <span class="va">dataGenderO</span>,</span>
<span>  dataGenderNA <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  dataAgeNA <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  outputCSCvarChar <span class="op">=</span> <span class="st">"CSC"</span>,</span>
<span>  lookupRef <span class="op">=</span> <span class="st">"Emily_PhD"</span>,</span>
<span>  useClinScoring <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkData <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwriteExistingVariable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  showInternalLookup <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-useinternallookup">useInternalLookup<a class="anchor" aria-label="anchor" href="#arg-useinternallookup"></a></dt>
<dd><p>logical: whether to use internal lookup table, defaults to TRUE</p></dd>


<dt id="arg-lookuptablename">lookupTableName<a class="anchor" aria-label="anchor" href="#arg-lookuptablename"></a></dt>
<dd><p>character: name of lookup file to use if not using internal table</p></dd>


<dt id="arg-lookupgendervarchar">lookupGenderVarChar<a class="anchor" aria-label="anchor" href="#arg-lookupgendervarchar"></a></dt>
<dd><p>character: name of gender variable in lookup file</p></dd>


<dt id="arg-lookupagevarchar">lookupAgeVarChar<a class="anchor" aria-label="anchor" href="#arg-lookupagevarchar"></a></dt>
<dd><p>character: name of age variable in lookup file</p></dd>


<dt id="arg-lookupcscvarchar">lookupCSCvarChar<a class="anchor" aria-label="anchor" href="#arg-lookupcscvarchar"></a></dt>
<dd><p>character: name of CSC variable in lookup file</p></dd>


<dt id="arg-lookupgenderf">lookupGenderF<a class="anchor" aria-label="anchor" href="#arg-lookupgenderf"></a></dt>
<dd><p>character: value representing female gender in lookup file</p></dd>


<dt id="arg-lookupgenderm">lookupGenderM<a class="anchor" aria-label="anchor" href="#arg-lookupgenderm"></a></dt>
<dd><p>character: value representing male gender in lookup file</p></dd>


<dt id="arg-lookupgendero">lookupGenderO<a class="anchor" aria-label="anchor" href="#arg-lookupgendero"></a></dt>
<dd><p>character: value representing other gender in lookup file</p></dd>


<dt id="arg-checkinternallookup">checkInternalLookup<a class="anchor" aria-label="anchor" href="#arg-checkinternallookup"></a></dt>
<dd><p>logical: whether to print the check for the internal lookup</p></dd>


<dt id="arg-checkexternallookup">checkExternalLookup<a class="anchor" aria-label="anchor" href="#arg-checkexternallookup"></a></dt>
<dd><p>logical: whether to print the check for an external lookup</p></dd>


<dt id="arg-datatablename">dataTableName<a class="anchor" aria-label="anchor" href="#arg-datatablename"></a></dt>
<dd><p>character: name of data file to use</p></dd>


<dt id="arg-datagendervarchar">dataGenderVarChar<a class="anchor" aria-label="anchor" href="#arg-datagendervarchar"></a></dt>
<dd><p>character: value representing female gender in data file</p></dd>


<dt id="arg-dataagevarchar">dataAgeVarChar<a class="anchor" aria-label="anchor" href="#arg-dataagevarchar"></a></dt>
<dd><p>character: name of gender variable in data file</p></dd>


<dt id="arg-datagenderf">dataGenderF<a class="anchor" aria-label="anchor" href="#arg-datagenderf"></a></dt>
<dd><p>value representing female gender in data file</p></dd>


<dt id="arg-datagenderm">dataGenderM<a class="anchor" aria-label="anchor" href="#arg-datagenderm"></a></dt>
<dd><p>value representing male gender in data file</p></dd>


<dt id="arg-datagendero">dataGenderO<a class="anchor" aria-label="anchor" href="#arg-datagendero"></a></dt>
<dd><p>value representing other gender in data file</p></dd>


<dt id="arg-datagenderna">dataGenderNA<a class="anchor" aria-label="anchor" href="#arg-datagenderna"></a></dt>
<dd><p>vector of values (one or more) representing missing gender values in datafile</p></dd>


<dt id="arg-dataagena">dataAgeNA<a class="anchor" aria-label="anchor" href="#arg-dataagena"></a></dt>
<dd><p>vector of values (one or more) representing missing age values in data</p></dd>


<dt id="arg-outputcscvarchar">outputCSCvarChar<a class="anchor" aria-label="anchor" href="#arg-outputcscvarchar"></a></dt>
<dd><p>character: name for output CSC variable, defaults to "CSC",</p></dd>


<dt id="arg-lookupref">lookupRef<a class="anchor" aria-label="anchor" href="#arg-lookupref"></a></dt>
<dd><p>character: which internal referential lookup data to use</p></dd>


<dt id="arg-useclinscoring">useClinScoring<a class="anchor" aria-label="anchor" href="#arg-useclinscoring"></a></dt>
<dd><p>logical: whether to use item mean scoring or "clinical" scoring</p></dd>


<dt id="arg-checkdata">checkData<a class="anchor" aria-label="anchor" href="#arg-checkdata"></a></dt>
<dd><p>logical: whether to check for issues in the data</p></dd>


<dt id="arg-overwriteexistingvariable">overwriteExistingVariable<a class="anchor" aria-label="anchor" href="#arg-overwriteexistingvariable"></a></dt>
<dd><p>logical: if TRUE allows overwriting of existing variable, default FALSE</p></dd>


<dt id="arg-showinternallookup">showInternalLookup<a class="anchor" aria-label="anchor" href="#arg-showinternallookup"></a></dt>
<dd><p>logical: if TRUE shows the internal lookup table selected</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble containing all the input data with added variable naming lookup used and CSC values</p>
    </div>
    <div class="section level2">
    <h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a></h2>


<p>One challenge with YP-CORE, and many other measures, is that the appropriate CSC (Clinically Significant Change)
value to use is not the same for all ages and genders.  This function takes new data with a gender and an age variable
and returns a new tibble with the same data plus the CSC for the gender and age given.  It has three lookup tables
built into the function but also allows you to submit your own lookup table.  Currently, that lookup is expected to be
a CSV (comma separated variable) file.  I'll improve that to allow a tibble and perhaps other formats.</p>
    </div>
    <div class="section level2">
    <h2 id="references-acknowledgements">References/acknowledgements<a class="anchor" aria-label="anchor" href="#references-acknowledgements"></a></h2>



<ol><li><p>The default internal lookup is the most recent UK referential data from Emily Blackshaw's PhD.  For now, see
<a href="https://www.coresystemtrust.org.uk/home/instruments/yp-core-information/" class="external-link">https://www.coresystemtrust.org.uk/home/instruments/yp-core-information/</a></p></li>
<li><p>The next UK lookup is from Twigg, E., Cooper, M., Evans, C., Freire, E. S., Mellor-Clark, J., McInnes, B., &amp; Barkham, M. (2016). Acceptability, reliability, referential distributions, and sensitivity to change of the YP-CORE outcome measure: Replication and refinement. Child and Adolescent Mental Health, 21(2), 115–123.
<a href="https://doi.org/10.1111/camh.12128" class="external-link">https://doi.org/10.1111/camh.12128</a></p></li>
<li><p>Currently the only other internal lookup is the Italian data from Di Biase, R., Evans, C., Rebecchi, D., Baccari, F., Saltini, A., Bravi, E., Palmieri, G., &amp; Starace, F. (2021). Exploration of psychometric properties of the Italian version of the Core Young Person’s Clinical Outcomes in Routine Evaluation (YP-CORE). Research in Psychotherapy: Psychopathology, Process and Outcome, 24(2).
<a href="https://doi.org/10.4081/ripppo.2021.554" class="external-link">https://doi.org/10.4081/ripppo.2021.554</a></p></li>
</ol></div>
    <div class="section level2">
    <h2 id="history-development-log">History/development log<a class="anchor" aria-label="anchor" href="#history-development-log"></a></h2>


<p>Version 1: 21.i.2024</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Chris Evans</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">### simple usage of the function with comments explaining the arguments rather more</span></span></span>
<span class="r-in"><span><span class="co">### see Rblog post ... for more information</span></span></span>
<span class="r-in"><span><span class="co">###</span></span></span>
<span class="r-in"><span><span class="fu">lookupCSCgenderAndAge</span><span class="op">(</span>useInternalLookup <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># so using the internal lookup data</span></span></span>
<span class="r-in"><span>                                                <span class="co"># (could have omitted this, it's the default)</span></span></span>
<span class="r-in"><span>   lookupTableName <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># so no need to give an external lookup table name</span></span></span>
<span class="r-in"><span>                                                <span class="co"># (default again could have omitted this)</span></span></span>
<span class="r-in"><span>   lookupGenderVarChar <span class="op">=</span> <span class="st">"Gender"</span>, <span class="co"># name of the gender variable in the lookup table</span></span></span>
<span class="r-in"><span>                                                <span class="co"># ditto!</span></span></span>
<span class="r-in"><span>   lookupAgeVarChar <span class="op">=</span> <span class="st">"Age"</span>, <span class="co"># name of the age variable ditto</span></span></span>
<span class="r-in"><span>   lookupGenderF <span class="op">=</span> <span class="st">"F"</span>, <span class="co"># code for female gender in the lookup table (ditto)</span></span></span>
<span class="r-in"><span>   lookupGenderM <span class="op">=</span> <span class="st">"M"</span>, <span class="co"># code for male gender ditto</span></span></span>
<span class="r-in"><span>   lookupGenderO <span class="op">=</span> <span class="st">"O"</span>, <span class="co"># code for other gender ditto</span></span></span>
<span class="r-in"><span>                        <span class="co"># for future proofing, current lookup tables are only binary gender</span></span></span>
<span class="r-in"><span>   <span class="co">### now the arguments about the data to code</span></span></span>
<span class="r-in"><span>   dataTableName <span class="op">=</span> <span class="va">tibData</span>, <span class="co"># crucial name of the data to classify, this and the following</span></span></span>
<span class="r-in"><span>   dataGenderVarChar <span class="op">=</span> <span class="st">"Gender"</span>, <span class="co"># name of the gender variable in those data (default)</span></span></span>
<span class="r-in"><span>   dataAgeVarChar <span class="op">=</span> <span class="st">"Age"</span>, <span class="co"># you can work out this and the following</span></span></span>
<span class="r-in"><span>   dataGenderF <span class="op">=</span> <span class="st">"F"</span>,</span></span>
<span class="r-in"><span>   dataGenderM <span class="op">=</span> <span class="st">"M"</span>,</span></span>
<span class="r-in"><span>   dataGenderO <span class="op">=</span> <span class="st">"O"</span>,</span></span>
<span class="r-in"><span>   <span class="co">### no missing values in lookup tables (would be meaningless),</span></span></span>
<span class="r-in"><span>   <span class="co">### but you may have missing values in your data hence this next argument</span></span></span>
<span class="r-in"><span>   dataGenderNA <span class="op">=</span> <span class="cn">NA_character_</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">tibBlackshaw</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>   <span class="co">### so that call returns the raw data but now with the CSC values</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tibBlackshaw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Gender</span>, <span class="va">Age</span>, <span class="va">CSC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Dataset2</span> <span class="op">==</span> <span class="st">"HS"</span> <span class="op">&amp;</span> <span class="va">ID</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">Gender</span> <span class="op">:</span> <span class="va">YPscore</span>, <span class="va">Ref</span>, <span class="va">CSC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">flextable</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">autofit</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Evans.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Function using gender and age in input file, with a lookup, to get appropriate CSC values — lookupCSCgenderAndAge • CECPfuns</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Function using gender and age in input file, with a lookup, to get appropriate CSC values — lookupCSCgenderAndAge"><meta property="og:description" content="Function using gender and age in input file, with a lookup, to get appropriate CSC values"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CECPfuns</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9041</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Background.html">Background</a>
    </li>
    <li>
      <a href="../articles/Bootstrapping.html">Bootstrapping</a>
    </li>
    <li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/RCSC_framework.html">RCSC_framework</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function using gender and age in input file, with a lookup, to get appropriate CSC values</h1>
    
    <div class="hidden name"><code>lookupCSCgenderAndAge.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function using gender and age in input file, with a lookup, to get appropriate CSC values</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lookupCSCgenderAndAge</span><span class="op">(</span></span>
<span>  useInternalLookup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lookupTableName <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">lookupGenderVarChar</span>,</span>
<span>  <span class="va">lookupAgeVarChar</span>,</span>
<span>  lookupCSCvarChar <span class="op">=</span> <span class="st">"CSC"</span>,</span>
<span>  <span class="va">lookupGenderF</span>,</span>
<span>  <span class="va">lookupGenderM</span>,</span>
<span>  <span class="va">lookupGenderO</span>,</span>
<span>  checkInternalLookup <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkExternalLookup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">dataTableName</span>,</span>
<span>  <span class="va">dataGenderVarChar</span>,</span>
<span>  <span class="va">dataAgeVarChar</span>,</span>
<span>  <span class="va">dataGenderF</span>,</span>
<span>  <span class="va">dataGenderM</span>,</span>
<span>  <span class="va">dataGenderO</span>,</span>
<span>  dataGenderNA <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  dataAgeNA <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  outputCSCvarChar <span class="op">=</span> <span class="st">"CSC"</span>,</span>
<span>  lookupRef <span class="op">=</span> <span class="st">"Emily_PhD"</span>,</span>
<span>  useClinScoring <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkData <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwriteExistingVariable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  showInternalLookup <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>useInternalLookup</dt>
<dd><p>logical: whether to use internal lookup table, defaults to TRUE</p></dd>


<dt>lookupTableName</dt>
<dd><p>character: name of lookup file to use if not using internal table</p></dd>


<dt>lookupGenderVarChar</dt>
<dd><p>character: name of gender variable in lookup file</p></dd>


<dt>lookupAgeVarChar</dt>
<dd><p>character: name of age variable in lookup file</p></dd>


<dt>lookupCSCvarChar</dt>
<dd><p>character: name of CSC variable in lookup file</p></dd>


<dt>lookupGenderF</dt>
<dd><p>character: value representing female gender in lookup file</p></dd>


<dt>lookupGenderM</dt>
<dd><p>character: value representing male gender in lookup file</p></dd>


<dt>lookupGenderO</dt>
<dd><p>character: value representing other gender in lookup file</p></dd>


<dt>checkInternalLookup</dt>
<dd><p>logical: whether to print the check for the internal lookup</p></dd>


<dt>checkExternalLookup</dt>
<dd><p>logical: whether to print the check for an external lookup</p></dd>


<dt>dataTableName</dt>
<dd><p>character: name of data file to use</p></dd>


<dt>dataGenderVarChar</dt>
<dd><p>character: value representing female gender in data file</p></dd>


<dt>dataAgeVarChar</dt>
<dd><p>character: name of gender variable in data file</p></dd>


<dt>dataGenderF</dt>
<dd><p>value representing female gender in data file</p></dd>


<dt>dataGenderM</dt>
<dd><p>value representing male gender in data file</p></dd>


<dt>dataGenderO</dt>
<dd><p>value representing other gender in data file</p></dd>


<dt>dataGenderNA</dt>
<dd><p>vector of values (one or more) representing missing gender values in datafile</p></dd>


<dt>dataAgeNA</dt>
<dd><p>vector of values (one or more) representing missing age values in data</p></dd>


<dt>outputCSCvarChar</dt>
<dd><p>character: name for output CSC variable, defaults to "CSC",</p></dd>


<dt>lookupRef</dt>
<dd><p>character: which internal referential lookup data to use</p></dd>


<dt>useClinScoring</dt>
<dd><p>logical: whether to use item mean scoring or "clinical" scoring</p></dd>


<dt>checkData</dt>
<dd><p>logical: whether to check for issues in the data</p></dd>


<dt>overwriteExistingVariable</dt>
<dd><p>logical: if TRUE allows overwriting of existing variable, default FALSE</p></dd>


<dt>showInternalLookup</dt>
<dd><p>logical: if TRUE shows the internal lookup table selected</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a tibble containing all the input data with added variable naming lookup used and CSC values</p>
    </div>
    <div id="background">
    <h2>Background</h2>
    

<p>One challenge with YP-CORE, and many other measures, is that the appropriate CSC (Clinically Significant Change)
value to use is not the same for all ages and genders.  This function takes new data with a gender and an age variable
and returns a new tibble with the same data plus the CSC for the gender and age given.  It has three lookup tables
built into the function but also allows you to submit your own lookup table.  Currently, that lookup is expected to be
a CSV (comma separated variable) file.  I'll improve that to allow a tibble and perhaps other formats.</p>
    </div>
    <div id="references-acknowledgements">
    <h2>References/acknowledgements</h2>
    


<ol><li><p>The default internal lookup is the most recent UK referential data from Emily Blackshaw's PhD.  For now, see
<a href="https://www.coresystemtrust.org.uk/home/instruments/yp-core-information/" class="external-link">https://www.coresystemtrust.org.uk/home/instruments/yp-core-information/</a></p></li>
<li><p>The next UK lookup is from Twigg, E., Cooper, M., Evans, C., Freire, E. S., Mellor-Clark, J., McInnes, B., &amp; Barkham, M. (2016). Acceptability, reliability, referential distributions, and sensitivity to change of the YP-CORE outcome measure: Replication and refinement. Child and Adolescent Mental Health, 21(2), 115–123.
<a href="https://doi.org/10.1111/camh.12128" class="external-link">https://doi.org/10.1111/camh.12128</a></p></li>
<li><p>Currently the only other internal lookup is the Italian data from Di Biase, R., Evans, C., Rebecchi, D., Baccari, F., Saltini, A., Bravi, E., Palmieri, G., &amp; Starace, F. (2021). Exploration of psychometric properties of the Italian version of the Core Young Person’s Clinical Outcomes in Routine Evaluation (YP-CORE). Research in Psychotherapy: Psychopathology, Process and Outcome, 24(2).
<a href="https://doi.org/10.4081/ripppo.2021.554" class="external-link">https://doi.org/10.4081/ripppo.2021.554</a></p></li>
</ol></div>
    <div id="history-development-log">
    <h2>History/development log</h2>
    

<p>Version 1: 21.i.2024</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Chris Evans</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">### simple usage of the function with comments explaining the arguments rather more</span></span></span>
<span class="r-in"><span><span class="co">### see Rblog post ... for more information</span></span></span>
<span class="r-in"><span><span class="co">###</span></span></span>
<span class="r-in"><span><span class="fu">lookupCSCgenderAndAge</span><span class="op">(</span>useInternalLookup <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># so using the internal lookup data</span></span></span>
<span class="r-in"><span>                                                <span class="co"># (could have omitted this, it's the default)</span></span></span>
<span class="r-in"><span>   lookupTableName <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># so no need to give an external lookup table name</span></span></span>
<span class="r-in"><span>                                                <span class="co"># (default again could have omitted this)</span></span></span>
<span class="r-in"><span>   lookupGenderVarChar <span class="op">=</span> <span class="st">"Gender"</span>, <span class="co"># name of the gender variable in the lookup table</span></span></span>
<span class="r-in"><span>                                                <span class="co"># ditto!</span></span></span>
<span class="r-in"><span>   lookupAgeVarChar <span class="op">=</span> <span class="st">"Age"</span>, <span class="co"># name of the age variable ditto</span></span></span>
<span class="r-in"><span>   lookupGenderF <span class="op">=</span> <span class="st">"F"</span>, <span class="co"># code for female gender in the lookup table (ditto)</span></span></span>
<span class="r-in"><span>   lookupGenderM <span class="op">=</span> <span class="st">"M"</span>, <span class="co"># code for male gender ditto</span></span></span>
<span class="r-in"><span>   lookupGenderO <span class="op">=</span> <span class="st">"O"</span>, <span class="co"># code for other gender ditto</span></span></span>
<span class="r-in"><span>                        <span class="co"># for future proofing, current lookup tables are only binary gender</span></span></span>
<span class="r-in"><span>   <span class="co">### now the arguments about the data to code</span></span></span>
<span class="r-in"><span>   dataTableName <span class="op">=</span> <span class="va">tibData</span>, <span class="co"># crucial name of the data to classify, this and the following</span></span></span>
<span class="r-in"><span>   dataGenderVarChar <span class="op">=</span> <span class="st">"Gender"</span>, <span class="co"># name of the gender variable in those data (default)</span></span></span>
<span class="r-in"><span>   dataAgeVarChar <span class="op">=</span> <span class="st">"Age"</span>, <span class="co"># you can work out this and the following</span></span></span>
<span class="r-in"><span>   dataGenderF <span class="op">=</span> <span class="st">"F"</span>,</span></span>
<span class="r-in"><span>   dataGenderM <span class="op">=</span> <span class="st">"M"</span>,</span></span>
<span class="r-in"><span>   dataGenderO <span class="op">=</span> <span class="st">"O"</span>,</span></span>
<span class="r-in"><span>   <span class="co">### no missing values in lookup tables (would be meaningless),</span></span></span>
<span class="r-in"><span>   <span class="co">### but you may have missing values in your data hence this next argument</span></span></span>
<span class="r-in"><span>   dataGenderNA <span class="op">=</span> <span class="cn">NA_character_</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">tibBlackshaw</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>   <span class="co">### so that call returns the raw data but now with the CSC values</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tibBlackshaw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">group_by</span><span class="op">(</span><span class="va">Gender</span>, <span class="va">Age</span>, <span class="va">CSC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Dataset2</span> <span class="op">==</span> <span class="st">"HS"</span> <span class="op">&amp;</span> <span class="va">ID</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">select</span><span class="op">(</span><span class="va">ID</span>, <span class="va">Gender</span> <span class="op">:</span> <span class="va">YPscore</span>, <span class="va">Ref</span>, <span class="va">CSC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">flextable</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu">autofit</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Chris Evans.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>


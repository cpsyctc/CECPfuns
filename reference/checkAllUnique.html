<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to check all values of a vector or data frame/tibble column are unique — checkAllUnique • CECPfuns</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Function to check all values of a vector or data frame/tibble column are unique — checkAllUnique" />
<meta property="og:description" content="Function to check all values of a vector or data frame/tibble column are unique" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CECPfuns</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9041</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Background.html">Background</a>
    </li>
    <li>
      <a href="../articles/Bootstrapping.html">Bootstrapping</a>
    </li>
    <li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/RCSC_framework.html">RCSC_framework</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to check all values of a vector or data frame/tibble column are unique</h1>
    
    <div class="hidden name"><code>checkAllUnique.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to check all values of a vector or data frame/tibble column are unique</p>
    </div>

    <pre class="usage"><span class='fu'>checkAllUnique</span><span class='op'>(</span>
  <span class='va'>dat</span>,
  errIfNA <span class='op'>=</span> <span class='cn'>TRUE</span>,
  allowJustOneNA <span class='op'>=</span> <span class='cn'>TRUE</span>,
  allowMultipleColumns <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>vector, single dimensional list or columns of data frame or tibble to test to see if values/rows are all unique</p></td>
    </tr>
    <tr>
      <th>errIfNA</th>
      <td><p>logical: defaults to TRUE to disallow any NA values</p></td>
    </tr>
    <tr>
      <th>allowJustOneNA</th>
      <td><p>logical: defaults to TRUE so if errIfNA is FALSE but you have more than one NA function returns FALSE</p></td>
    </tr>
    <tr>
      <th>allowMultipleColumns</th>
      <td><p>logical: defaults to FALSE but if you really do want to allow all of multi-column dat, set to TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>logical: TRUE if all unique (see examples)</p>
    <h2 class="hasAnchor" id="background"><a class="anchor" href="#background"></a>Background</h2>

    

<p>This is a utility function to check that all the values of a vector, or a single column of a data frame or tibble,
or a single dimensional list are unique.  It can also check that all the rows of multiple columns of a data frame
or tibble, are all unique.</p>
<p>This is important where you expect a single row of data for each participant say, and so you expect the
values of participantID in a data set to be unique.  It will cripple things later if you don't identify
duplicated ID values.  Sometimes it's not just a single variable that should be unique, a typical example
of this is when you have data from multiple services and ID values for participants from each service.
Then there may be multiple values for ID but they should each come from a different service.  (Mind you,
once I have established that rows are unique across serviceID and participantID I usally paste the two
variables together with something like</p><pre><span class='va'>data</span><span class='op'>$</span><span class='va'>superID</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>serviceID</span>, <span class='st'>":"</span>, <span class='va'>data</span><span class='op'>$</span><span class='va'>participantID</span><span class='op'>)</span>
</pre>

<p>or a tidyverse way of doing it:</p><pre><span class='va'>data</span> <span class='op'>%&gt;%</span>
         <span class='fu'>mutate</span><span class='op'>(</span>superID <span class='op'>=</span> <span class='fu'>str_c</span><span class='op'>(</span><span class='va'>serviceID</span>, <span class='st'>":"</span>, <span class='va'>participantID</span><span class='op'>)</span><span class='op'>)</span>
</pre>

<p>Making sure things are unique also prevents all sorts of sometimes very confusing error messages if you want to pivot
data depending on an ID variable whose values ought to be unique but aren't.  Checking for this is in my
<a href='https://www.psyctc.org/Rblog/wisdom.html'>Wisdom! Rblog page</a> .</p>
    <h2 class="hasAnchor" id="history-development-log"><a class="anchor" href="#history-development-log"></a>History/development log</h2>

    

<p>Started before 5.iv.21
Tweaked 11.iv.21 to fix error in examples.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other data checking functions: 
<code><a href='getNNA.html'>getNNA</a>()</code>,
<code><a href='getNOK.html'>getNOK</a>()</code>,
<code><a href='isOneToOne.html'>isOneToOne</a>()</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Chris Evans</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>### letters gets us the 26 lower case letters of the English alphabet so should test OK</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>letters</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### good!</span>

<span class='co'>### the checking is case sensitive:</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"A"</span>, <span class='va'>letters</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span>, allowJustOneNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### but ...</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='va'>letters</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span>, allowJustOneNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] FALSE</span>
<span class='co'>### both good!</span>

<span class='co'>### by default checkAllUnique doesn't allow any NA values,</span>
<span class='co'>### generally sensible for my data: ID codes or table indices</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>letters</span>, <span class='cn'>NA</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># [1] FALSE</span>
<span class='co'>### good!</span>

<span class='co'>### but we can override that:</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>letters</span>, <span class='cn'>NA</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### good!</span>

<span class='co'>### but generally I wouldn't want multiple NA values</span>
<span class='co'>### in the typical situations I'd be using</span>
<span class='co'>### checkAllUnique() so I have forced you to allow</span>
<span class='co'>### that explicitly if you really want it ...</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='va'>letters</span>, <span class='cn'>NA</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] FALSE</span>
<span class='co'>### good!</span>

<span class='co'>### but you _can_ override that if you need to ...</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='va'>letters</span>, <span class='cn'>NA</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span>, allowJustOneNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### good!</span>
<span class='co'>### but you _can_ override that if you need to ...</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='va'>letters</span>, <span class='cn'>NA</span><span class='op'>)</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span>, allowJustOneNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### good!</span>

<span class='co'>### by default checkAllUnique expects vector input but it can handle data</span>
<span class='co'>### in multiple columns in a data frame or tibble</span>
<span class='va'>tmpDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, ncol <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>tmpDat</span>
<span class='co'># V1 V2</span>
<span class='co'># 1  1  6</span>
<span class='co'># 2  2  7</span>
<span class='co'># 3  3  8</span>
<span class='co'># 4  4  9</span>
<span class='co'># 5  5 10</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDat</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDat</span><span class='op'>[</span>, <span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>### but remember column indexing a tibble returns a tibble not a vector</span>
<span class='va'>tmpTib</span> <span class='op'>&lt;-</span> <span class='fu'>as_tibble</span><span class='op'>(</span><span class='va'>tmpDat</span><span class='op'>)</span>
<span class='va'>tmpTib</span>
<span class='co'># # A tibble: 5 x 2</span>
<span class='co'># V1    V2</span>
<span class='co'># &lt;int&gt; &lt;int&gt;</span>
<span class='co'>#   1     1     6</span>
<span class='co'># 2     2     7</span>
<span class='co'># 3     3     8</span>
<span class='co'># 4     4     9</span>
<span class='co'># 5     5    10</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpTib</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
<span class='co'># Error in checkAllUnique(tmpTib[, 1]) :</span>
<span class='co'>#   You have input an object of length one to checkAllUnique(): makes no sense!</span>
<span class='co'>### whoops, I remember, must pull() to extract as vector</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpTib</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpTib</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>

<span class='co'>### you _can_ allow multiple columns</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDat</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'>#   In checkAllUnique(tmpDat, allowMultipleColumns = TRUE) :</span>
<span class='co'>#   Input of dat to checkAllUnique was not a vector: be careful please!</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpTib</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'># Warning message:</span>
<span class='co'>#   In checkAllUnique(tmpTib, allowMultipleColumns = TRUE) :</span>
<span class='co'>#   Input of dat to checkAllUnique was not a vector: be careful please!</span>

<span class='co'>### but it is checking all content in all columns so if two rows are the</span>
<span class='co'>### same it will return FALSE:</span>
<span class='va'>tmpDat2</span> <span class='op'>&lt;-</span> <span class='va'>tmpDat</span>
<span class='va'>tmpDat2</span><span class='op'>[</span><span class='fl'>2</span>, <span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>tmpDat</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span> <span class='co'># make row 2 same as row 1</span>
<span class='va'>tmpDat2</span>
<span class='co'># V1 V2</span>
<span class='co'># 1  1  6</span>
<span class='co'># 2  1  6</span>
<span class='co'># 3  3  8</span>
<span class='co'># 4  4  9</span>
<span class='co'># 5  5 10</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDat2</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># [1] FALSE</span>
<span class='co'># Warning message:</span>
<span class='co'>#   In checkAllUnique(tmpDat2, allowMultipleColumns = TRUE) :</span>
<span class='co'>#   Input of dat to checkAllUnique was not a vector: be careful please!</span>


<span class='co'>### what about columns of different classes, e.g. numeric and character</span>
<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>tmpDat2</span>, <span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpDatMixed</span>
<span class='va'>tmpDatMixed</span>
<span class='co'># V1 V2 letters[1:5]</span>
<span class='co'># 1  1  6            a</span>
<span class='co'># 2  1  6            b</span>
<span class='co'># 3  3  8            c</span>
<span class='co'># 4  4  9            d</span>
<span class='co'># 5  5 10            e</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDatMixed</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># [1] TRUE</span>
<span class='co'># Warning message:</span>
<span class='co'>#   In checkAllUnique(tmpDatMixed, allowMultipleColumns = TRUE) :</span>
<span class='co'>#   Input of dat to checkAllUnique was not a vector: be careful please!</span>
<span class='co'>### that came out as TRUE because R "promoted" the numerics to character</span>
<span class='co'>### and because the two different letters in rows 1 and 2 of column 3</span>
<span class='co'>### broke the non-unique tie of rows 1 and 2 in columns 1 and 2</span>

<span class='co'>### what about having NA in a multicolumn input?</span>
<span class='va'>tmpDatNA</span> <span class='op'>&lt;-</span> <span class='va'>tmpDat</span>
<span class='va'>tmpDatNA</span><span class='op'>[</span><span class='fl'>2</span>, <span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='va'>tmpDatNA</span>
<span class='co'># 1  1  6</span>
<span class='co'># 2 NA  7</span>
<span class='co'># 3  3  8</span>
<span class='co'># 4  4  9</span>
<span class='co'># 5  5 10</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDatNA</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># [1] FALSE</span>
<span class='co'># Warning message:</span>
<span class='co'>#   In checkAllUnique(tmpDatNA, allowMultipleColumns = TRUE) :</span>
<span class='co'>#   Input of dat to checkAllUnique was not a vector: be careful please!</span>
<span class='co'>### but</span>
<span class='fu'>checkAllUnique</span><span class='op'>(</span><span class='va'>tmpDatNA</span>, allowMultipleColumns <span class='op'>=</span> <span class='cn'>TRUE</span>, errIfNA <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Chris Evans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


